# Инструкция по запуску

Этот документ содержит инструкцию по запуску всех компонентов проекта: Гипервизор, Бэкенд и UI.

## Для Ubuntu 24.04

Если вы используете Ubuntu 24.04, вы можете использовать скрипт `setup-ubuntu.sh` для автоматической установки всех необходимых зависимостей.

```bash
# Сделайте скрипт исполняемым
chmod +x setup-ubuntu.sh

# Запустите скрипт
./setup-ubuntu.sh
```

После выполнения скрипта, вам нужно будет выйти из системы и войти снова, чтобы изменения группы Docker применились.

После этого вы можете выбрать один из двух способов запуска инфраструктуры, описанных ниже.

## Способ 1: С использованием Docker (Рекомендуется)

Этот способ использует Docker и `docker-compose` для запуска всех компонентов проекта в контейнерах. Это самый простой и надежный способ.

```bash
# Сделайте скрипт исполняемым
chmod +x start-infra.sh

# Запустите инфраструктуру
./start-infra.sh
```

Чтобы остановить все сервисы, используйте скрипт `stop-infra.sh`:

```bash
# Сделайте скрипт исполняемым
chmod +x stop-infra.sh

# Остановите инфраструктуру
./stop-infra.sh
```

## Способ 2: Без использования Docker

Этот способ запускает все компоненты прямо на вашем компьютере. Он требует ручной установки и настройки базы данных PostgreSQL.

```bash
# Сделайте скрипт исполняемым
chmod +x start-no-docker.sh

# Запустите инфраструктуру
./start-no-docker.sh
```

Чтобы остановить все сервисы, используйте скрипт `stop-no-docker.sh`:

```bash
# Сделайте скрипт исполняемым
chmod +x stop-no-docker.sh

# Остановите инфраструктуру
./stop-no-docker.sh
```

## Перед началом (для не-Ubuntu систем)

Убедитесь, что у вас установлены все необходимые зависимости:
- Java 17+
- Maven
- Node.js и npm
- Angular CLI
- Go
- Docker и Docker Compose
- PostgreSQL

## 1. Запуск базы данных (PostgreSQL)

Бэкенд требует базу данных PostgreSQL. Самый простой способ запустить ее - использовать Docker.

```bash
docker-compose up -d
```
Эта команда запустит PostgreSQL в Docker контейнере. База данных будет доступна по адресу `localhost:5432`.

## 2. Запуск Гипервизора

Гипервизор - это Go приложение, которое управляет виртуальными машинами.

```bash
# Перейдите в директорию гипервизора
cd hypervisor

# Запустите приложение
go run main.go
```
Гипервизор будет запущен и будет слушать порты:
- **8080** (для REST API)
- **9090** (для gRPC)

## 3. Запуск Бэкенда

Бэкенд - это Spring Boot приложение, которое предоставляет API для UI.

```bash
# Перейдите в директорию бэкенда
cd backend

# Запустите приложение с помощью Maven
./mvnw spring-boot:run
```
Бэкенд будет запущен и будет слушать порт **8081**.

## 4. Запуск UI

UI - это Angular приложение, которое является пользовательским интерфейсом.

```bash
# Перейдите в директорию UI
cd frontend

# Установите зависимости (если еще не установлены)
npm install

# Запустите dev server
npm start
```
UI будет доступно по адресу `http://localhost:4200`. Все запросы к API (`/api/...`) будут автоматически перенаправляться на бэкенд, работающий на порту 8081.

## Итог

После выполнения всех шагов, у вас будут запущены следующие сервисы:
- **PostgreSQL:** `localhost:5432`
- **Гипервизор:** `localhost:8080` (REST) и `localhost:9090` (gRPC)
- **Бэкенд:** `localhost:8081`
- **UI:** `http://localhost:4200`
