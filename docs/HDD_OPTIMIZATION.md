# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è CS2Panel –¥–ª—è HDD

## üíæ HDD - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!

–ú–Ω–æ–≥–∏–µ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç HDD –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö. –í–æ—Ç –∫–∞–∫ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É:

## üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏ ISO –Ω–∞ HDD

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ë—ã—Å—Ç—Ä—ã–π —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
sudo ./scripts/build-iso-fast.sh
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç RAM –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –∫–æ–º–ø—Ä–µ—Å—Å–∏—è
- ‚úÖ –ú–µ–Ω—å—à–µ –∑–∞–ø–∏—Å–µ–π –Ω–∞ –¥–∏—Å–∫
- ‚úÖ –ù–∞ 30-40% –±—ã—Å—Ç—Ä–µ–µ –æ–±—ã—á–Ω–æ–≥–æ

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RAM –¥–∏—Å–∫–∞ –≤—Ä—É—á–Ω—É—é

```bash
# –°–æ–∑–¥–∞—Ç—å RAM –¥–∏—Å–∫ (—Ç—Ä–µ–±—É–µ—Ç—Å—è 4GB+ RAM)
sudo mkdir -p /mnt/ramdisk
sudo mount -t tmpfs -o size=4G tmpfs /mnt/ramdisk

# –°–±–æ—Ä–∫–∞ –≤ RAM
cd /mnt/ramdisk
sudo /path/to/build-iso.sh

# –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ SSD –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –º–∞–ª–µ–Ω—å–∫–∏–π SSD:

```bash
# –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –Ω–∞ SSD
sudo mkdir -p /mnt/ssd/cs2panel-build

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å BUILD_DIR –≤ —Å–∫—Ä–∏–ø—Ç–µ
export BUILD_DIR=/mnt/ssd/cs2panel-build

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–±–æ—Ä–∫—É
sudo ./scripts/build-iso.sh
```

## üîß –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –≥–∏–ø–µ—Ä–≤–∏–∑–æ—Ä–∞ –Ω–∞ HDD

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ I/O

```bash
# –î–ª—è HDD –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ deadline –∏–ª–∏ mq-deadline
echo deadline | sudo tee /sys/block/sda/queue/scheduler

# –ò–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ GRUB
sudo nano /etc/default/grub
# –î–æ–±–∞–≤—å—Ç–µ: GRUB_CMDLINE_LINUX="elevator=deadline"
sudo update-grub
```

### 2. –û—Ç–∫–ª—é—á–µ–Ω–∏–µ unnecessary services

```bash
# –û—Ç–∫–ª—é—á–∏—Ç—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é
sudo systemctl stop mlocate.timer
sudo systemctl disable mlocate.timer

# –û—Ç–∫–ª—é—á–∏—Ç—å –∂—É—Ä–Ω–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ RAM
sudo nano /etc/systemd/journald.conf
# –î–æ–±–∞–≤—å—Ç–µ:
# Storage=volatile
# RuntimeMaxUse=100M

sudo systemctl restart systemd-journald
```

### 3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è VM –¥–∏—Å–∫–æ–≤

```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ virtio-scsi –≤–º–µ—Å—Ç–æ IDE
# –í–∫–ª—é—á–∏—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:

virsh edit vm-name
```

–î–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
```xml
<disk type='file' device='disk'>
  <driver name='qemu' type='qcow2' cache='writeback' io='threads'/>
  <source file='/var/lib/libvirt/images/vm.qcow2'/>
  <target dev='vda' bus='virtio'/>
</disk>
```

### 4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ HDD –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ü–µ–ª–µ–π

```
–î–∏—Å–∫ 1 (HDD): –°–∏—Å—Ç–µ–º–∞ –∏ –≥–∏–ø–µ—Ä–≤–∏–∑–æ—Ä (100GB)
–î–∏—Å–∫ 2 (HDD): VM –¥–∏—Å–∫–∏ (1TB+)
–î–∏—Å–∫ 3 (HDD): –ë—ç–∫–∞–ø—ã –∏ –∞—Ä—Ö–∏–≤—ã (2TB+)
```

### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ swappiness

```bash
# –£–º–µ–Ω—å—à–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ swap
sudo sysctl vm.swappiness=10
echo "vm.swappiness=10" | sudo tee -a /etc/sysctl.conf
```

### 6. –û—Ç–∫–ª—é—á–µ–Ω–∏–µ atime

–í `/etc/fstab`:
```
UUID=xxx  /  ext4  noatime,nodiratime  0  1
```

## ‚ö° –ü–æ–≤—ã—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ VM –Ω–∞ HDD

### 1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–Ω–∫–∏–µ –¥–∏—Å–∫–∏ (thin provisioning)

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–Ω–∫–æ–≥–æ –¥–∏—Å–∫–∞
qemu-img create -f qcow2 -o preallocation=metadata vm-disk.qcow2 50G
```

### 2. –í–∫–ª—é—á–∏—Ç–µ –¥–∏—Å–∫–æ–≤—ã–π –∫—ç—à –Ω–∞ VM

–í `application.yml` backend:
```yaml
app:
  virtualization:
    default-cache-mode: writeback
    io-mode: threads
```

### 3. –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ I/O

```yaml
app:
  virtualization:
    max-concurrent-vm-ops: 2  # –ù–µ –±–æ–ª—å—à–µ 2 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–∞ HDD
```

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è VM:

| –î–∏—Å–∫ | –°–æ–∑–¥–∞–Ω–∏–µ | –ó–∞–ø—É—Å–∫ | –°–Ω–∞–ø—à–æ—Ç |
|------|----------|--------|---------|
| NVMe SSD | 5 —Å–µ–∫ | 3 —Å–µ–∫ | 2 —Å–µ–∫ |
| SATA SSD | 8 —Å–µ–∫ | 5 —Å–µ–∫ | 3 —Å–µ–∫ |
| **HDD 7200** | **15 —Å–µ–∫** | **10 —Å–µ–∫** | **8 —Å–µ–∫** |
| HDD 5400 | 25 —Å–µ–∫ | 15 —Å–µ–∫ | 12 —Å–µ–∫ |

### –í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ ISO:

| –î–∏—Å–∫ | Full Build | Fast Build |
|------|-----------|------------|
| NVMe SSD | 15 –º–∏–Ω | 10 –º–∏–Ω |
| SATA SSD | 25 –º–∏–Ω | 15 –º–∏–Ω |
| **HDD 7200** | **45 –º–∏–Ω** | **30 –º–∏–Ω** |

## üí° –°–æ–≤–µ—Ç—ã

### ‚úÖ –ß—Ç–æ –ú–û–ñ–ù–û –¥–µ–ª–∞—Ç—å —Å HDD:
- –•—Ä–∞–Ω–µ–Ω–∏–µ VM –¥–∏—Å–∫–æ–≤
- –ë—ç–∫–∞–ø—ã
- –ê—Ä—Ö–∏–≤—ã
- –õ–æ–≥–∏
- ISO –æ–±—Ä–∞–∑—ã
- –°–Ω–∞–ø—à–æ—Ç—ã (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ)

### ‚ö†Ô∏è –ß—Ç–æ –ª—É—á—à–µ –Ω–∞ SSD (–µ—Å–ª–∏ –µ—Å—Ç—å):
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö backend (PostgreSQL)
- Redis –∫—ç—à
- RabbitMQ
- –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ñ–∞–π–ª—ã
- Swap —Ä–∞–∑–¥–µ–ª
- Docker volumes

## üéØ –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–µ—Å–ª–∏ –±—é–¥–∂–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω)

```
1x SSD 128GB   - –°–∏—Å—Ç–µ–º–∞ + Backend + –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö    ($30)
2x HDD 2TB     - VM –¥–∏—Å–∫–∏ + –ë—ç–∫–∞–ø—ã (RAID1)          ($100)
RAM 32GB       - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏                ($100)
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–ò—Ç–æ–≥–æ: $230 (–≤–º–µ—Å—Ç–æ $500+ –Ω–∞ NVMe)
```

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ HDD

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏
sudo hdparm -tT /dev/sda

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ I/O
iostat -x 1

# SMART —Å—Ç–∞—Ç—É—Å
sudo smartctl -a /dev/sda

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –±–∏—Ç—ã–µ —Å–µ–∫—Ç–æ—Ä–∞
sudo badblocks -sv /dev/sda
```

## üõ†Ô∏è –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ HDD

### –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ:
```bash
# –î–µ—Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è ext4 (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
sudo e4defrag /

# –ü—Ä–æ–≤–µ—Ä–∫–∞ SMART
sudo smartctl -a /dev/sda | grep -i error
```

### –ï–∂–µ–º–µ—Å—è—á–Ω–æ:
```bash
# –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã (–≤ single mode)
sudo fsck -f /dev/sda1
```

## üìà –ö–æ–≥–¥–∞ —Å—Ç–æ–∏—Ç –∞–ø–≥—Ä–µ–π–¥–∏—Ç—å –Ω–∞ SSD

**Upgrade –Ω–∞ SSD —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –µ—Å–ª–∏:**
- ‚è∞ –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ VM > 500ms
- üìä iowait > 20%
- üîÑ –ß–∞—Å—Ç—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ snapshot/restore
- üéÆ –ú–Ω–æ–≥–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö CS2 —Å–µ—Ä–≤–µ—Ä–æ–≤ (>10)
- üíæ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ç–æ—Ä–º–æ–∑–∏—Ç

**HDD –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –µ—Å–ª–∏:**
- ‚úÖ –ù–µ–±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ VM (< 10)
- ‚úÖ –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–∞—è –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å
- ‚úÖ –ë—é–¥–∂–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω
- ‚úÖ –û—Å–Ω–æ–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ - —Ö—Ä–∞–Ω–µ–Ω–∏–µ

## üí™ –í—ã–≤–æ–¥

**HDD - –æ—Ç–ª–∏—á–Ω—ã–π –≤—ã–±–æ—Ä –¥–ª—è:**
- üèóÔ∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- üìö –û–±—É—á–µ–Ω–∏—è
- üè† –î–æ–º–∞—à–Ω–µ–≥–æ lab
- üí∞ –ë—é–¥–∂–µ—Ç–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
- üì¶ –•—Ä–∞–Ω–µ–Ω–∏—è –±–æ–ª—å—à–æ–≥–æ –æ–±—ä–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö

**–ì–ª–∞–≤–Ω–æ–µ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≤—ã—à–µ
- –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–¥–æ—Ä–æ–≤—å—è –¥–∏—Å–∫–∞
- –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

---

**–ù–µ –ø–µ—Ä–µ–∂–∏–≤–∞–π—Ç–µ –∏–∑-–∑–∞ HDD! –ú–Ω–æ–≥–∏–µ —É—Å–ø–µ—à–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ HDD! üí™**
